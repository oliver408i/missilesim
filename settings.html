<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Difficulty settings</title>
</head>
<body>
    <form id="dropdownForm">
        <h3>Missile Settings</h3>
        <label for="irccm">IRCCM</label>
        <p>IRCCM mode. Outliner draws wireframes around flares of a certain temperature or higher.</p>
        <select id="irccm" name="irccm">
            <option value="None">None</option>
            <option value="outliner">Flare Outliner</option>
        </select>
        <br><br>
        
        <label for="proxyFuse">Proxy Fuse</label>
        <p>Proxy fuse will automatically detonate the missile once it gets in a certain distance of a certain object. Auto targetting will only target the actual object. Rangefinder mode will detonate the missile when the rangefinder encounters any close object.</p>
        <br>
        <select id="proxyFuse" name="proxyFuse">
            <option value="None">Off</option>
            <option value="autoTargetting">Auto Targetting</option>
            <option value="laser">Rangefinder</option>
        </select>

        <br><br>

        <label for="rangefinderMode">Rangefinder Mode</label>
        <p>The laser rangefinder will display how far away an object is. Linear mode looks for the closest object directly in front of the missile.</p>
        <select id="rangefinderMode" name="rangefinderMode">
            <option value="None">Off</option>
            <option value="linear">Front-Linear</option>
        </select>

        <br><br>

        
        <label for="proxyFuseDistance">Proxy Fuse Distance</label>
        <p>Distance in meters at which the missile will automatically detonate. Affects all proxy fuse modes.</p>
        <input type="number" id="proxyFuseDistance" name="proxyFuseDistance" min="1" max="10" value="5"/>
        <br><br>
        
        <button type="button" onclick="saveToLocalStorage()">Save & Begin</button>
    </form>

    <script>
        // Load old settings if they exist
        if (localStorage.getItem('missileSpecs')) {
            const data = JSON.parse(localStorage.getItem('missileSpecs'));

            document.getElementById('irccm').value = data.irccmMode;
            document.getElementById('proxyFuse').value = data.proxyFuse;
            document.getElementById('proxyFuseDistance').value = data.proxyFuseDistance;
            document.getElementById('rangefinderMode').value = data.rangefinderMode;
        }
        function saveToLocalStorage() {
            const irccm = document.getElementById('irccm').value;
            const proxyFuse = document.getElementById('proxyFuse').value;
            const proxyFuseDistance = document.getElementById('proxyFuseDistance').value;
            const rangefinderMode = document.getElementById('rangefinderMode').value;

            const data = {
                irccmMode: irccm,
                proxyFuse: proxyFuse,
                proxyFuseDistance: proxyFuseDistance,
                rangefinderMode: rangefinderMode
            };
            
            localStorage.setItem('missileSpecs', JSON.stringify(data));
            var currentPath = window.location.pathname;
            var newPath = currentPath.substring(0, currentPath.lastIndexOf('/')) + "/index.html";
            window.location.href = newPath;
        }
    </script>
</body>
</html>